proc TPIon {} {
set curTemp [get_t "MDT_Пол"]
set tarTemp [expr "[get_hc_ts {^ТП_RoomT$}] - 2730"]
puts "Проверка: $curTemp <= $tarTemp"
if {<= $curTemp $tarTemp} {
TPIon1
} else {
settim timeTPI 20000 1
}
}

proc TPIon1 {} {
objcmd RoomNC "0 20"
settim TPIoff 900000
settim timeTPI 0
}

proc TPIoff {} {
puts "Выключение ТП"
objcmd RoomNC "0 180"
settim TPIon 600000
}

proc timeTPI {} {
if {== [gettim "TPIoff"] 0} {
TPIon
}
}
