Для работы с Modbus, если не прокатило затащить устройство сходу, рекомендуется использования ПК+rs485 <>usb + ModbusPoll или аналогичную связку
https://www.modbustools.com/download.html


Функция для просмотра лога - что летит по мб в устройство (и вообще есть ли там что)
________________________
>proc mbm {i e n v} {
puts $n
}
_____
>proc mbm {i e n v} {
puts $n
}
________________________



Пример отправки команды по mb для чтения
>mbsend 3 1 0 18

Пример отправки команды по mb для записи одного регистра

>mbsend 6 1 4 1 280


**листинг команды**


**mbsend funk mbslaveAdres REG LEN_data data**

**небольшое how-to для модбас термостатов**


1 подключение термостат в соответствии с руководством (скорости, чётности, стопы)


перезагрузитесь

2. вводите в терминале 

2.1 сообщение:

>proc mbm {i e n v} {
puts $n
}


2.2 сообщение 

>proc mbm {i e n v} {
puts $n
}


2.3 сообщение

>mbsend 3 1 0 ХХ


описание см выше


ХХ надо заменить на данные из руководства на термостат, (посчитать сколько там регистров). будет что все регистры разом не читает, делим на части вычитываем значения


получаете ответ (количество отдельных данных будет равно ХХ+3) формата:

 
12:50:31 <H 1 2 2305 0 256 7168 0 256 61440 61440 256 37637

данные являются списком, нумерация списка начинается с **0**

значение в первом регистре будет именно индекс 3

этим данные предоставлены в кодированном формате:

истинное значение = NN/256+ остаток(NN,256)*256


открываете эксель и смотрите что за что отвечает, сравнивая с руководством.

все, остаётся правильно исправить регистры в шаблоне и выполнить уровень из файла readme к сценарию

